{% extends "3columns.html" %}

{% block title %}{% endblock %}

{% block media %}
<link rel="stylesheet" href="{{ MEDIA_URL }}css/magicsuggest-1.1.1.css">
<script type="text/javascript" src="{{ MEDIA_URL }}js/class-0.0.2.js"></script>
<script type="text/javascript" src="{{ MEDIA_URL }}js/magicsuggest-1.1.1.js"></script>
<script type="text/javascript">
$(document).on('ready', function(){
	var tags
	$('#id_category').on('change', function(){
		var category_id = $(this).val()
		tags = new MagicSuggest({
                renderTo: $('#tags-container'),
                width: 490,
                emptyText:'Escribe Aqui',
                noSuggestionText : 'Sin Sugerencias',
                required: true,
                data:'/tags/',
                method: 'GET',
                valueField:'name',
                dataParams : {
                	"category_id" : category_id
                }

		});
	});
	$('#submit-post').on('click', function(e){
		e.preventDefault()
		var tags_input = tags.getValue()
		$('#tags').val(tags_input)
		$('#post-article').submit()
	})
});
</script>
{% endblock %}

{% block search-bar %}
	{% include "search.html" %}
{% endblock %}

{% block section1 %}
	{% include "categories.html" %}
{% endblock %}

{% block section2 %}
<section class="wrapper-div background1">
	<h2>Publicar una Compra</h2>
	<form method="POST" action="" enctype="multipart/form-data">{% csrf_token %}
		<div>
			<legend>Titulo del Articulo</legend>
			<div>
				{{ form.title }}
				<span class="block-help">Entre mas claro sea el titulo de tu articulo, mas ofertas recibiras.</span>
				{{ form.title.errors }}
			</div>
		</div>

		<div class="row-fluid">
			<div class="span6">
				<legend>Precio</legend>
				{{ form.price }}
				<span class="help-block">Es el precio que estas dispuesto a pagar por tu articulo.</span>
				{{ form.price.errors }}
			</div>
			<div class="span6">
				<legend>Cantidad</legend>
				{{ form.quantity }}
				<span class="help-block">Escribe el numero de articulos que estas buscando, solo enteros.</span>
				{{ form.quantity.errors }}
			</div>
		</div>

		<div>
			<legend>Descripcion</legend>
			{{ form.description }}
			<span class="help-block">Describe el articulo que estas buscando e incluye detalles sobre el.</span>
			{{ form.description.errors }}
		</div>

		<div class="row-fluid">
			<div class="span6">
				<legend>Estado del Articulo</legend>
				{{ form.state }}
				<span class="help-block">El articulo que quieres es nuevo o usado?.</span>
				{{ form.state.errors }}
			</div>
			<div class="span6">
				<legend>Clasificacion</legend>
				{{ form.category }}
				<span class="help-block">Selecciona la categoria en donde clasificarias tu articulo.</span>
				{{ form.category.errors }}
			</div>
		</div>

		<div>
			<legend>Tags</legend>
			<input type="text" id="tags-container">
			<input type="hidden" id="tags" name="tags">
		</div>

		<center>
			<input class="btn btn-success btn-large" type="submit" value="Guardar">
		</center>
	</form>
</section>
{% endblock %}

{% block section3 %}
	{% include "howtodo.html" %}
{% endblock %}

